!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(n.example=n.example||{})}(this,function(n){"use strict";var r=function(){var n=arguments[0],r=n.length,e=function(){var t=Array.prototype.slice.call(arguments);return t.length>=r?n.apply(null,t):e.bind.apply(e,[null].concat(t))};return e.bind.apply(e,[null].concat(Array.prototype.slice.call(arguments,1)))},e=function(n){return n.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n").replace(/^ +$/gm,"")},t=function(){var n=Array.prototype.slice.call(arguments),r=n.length-1;return function(e){for(var t=e,u=r;u>=0;u-=1)t=n[u](t);return t}},u=(r(function(n,r){return n===r}),r(function(n,r){return n.exec(r)})),i=r(function(n,r){for(var e=new Array(r.length),t=0;t<r.length;t+=1)e[t]=n(r[t],t,r);return e}),l=r(function(n,r){return r.match(n)||[]}),o=r(function(n,r){return n.test(r)}),a=r(function(n,r,e){return e.replace(n,r)}),s=r(function(n,r){return r.split(n)}),c=(r(function(n,r){return 0===r.indexOf(n)}),function(n){return n.trim()}),p=u(/^( *>[^\n]+(\n(?! *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$))[^\n]+)*\n*)+/),f=a(/^ *> ?/gm,""),g=function(n,r){if(">"!==n[0])return null;var e=p(n);if(!e)return null;var t=e[0],u=r(f(t));return 1===u.length&&"paragraph"===u[0].type&&(u=u[0].children),{token:{type:"blockquote",children:r(f(t))},newSource:n.substring(t.length)}},b=u(/^( {4}[^\n]+\n*)+/),h=a(/^ {4}/gm,""),v=u(/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/),d=function(n){if("`"!==n[0])return null;var r=b(n);if(!r)return null;var e=r[0];return{token:{type:"codeblock",language:"",value:h(e)},newSource:n.substring(e.length)}},y=function(n){var r=v(n);if(!r)return null;var e=r[0];return{token:{type:"codeblock",language:r[2],value:r[3]},newSource:n.substring(e.length)}},k=function(n){return d(n)||y(n)},S=u(/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/),m=u(/^([^\n]+)\n *([=-]){2,} *(?:\n+|$)/),w=function(n){return"#"===n[0]?n.length:"="===n[0]?1:2},$=function(n,r,e){var t="#"===n[0],u=t&&S(n)||m(n);if(!u)return null;var i=u[0],l=t?u[1]:u[2],o=t?u[2]:u[1];return{token:{type:"heading",level:w(l),children:e(o)},newSource:n.substring(i.length)}},_=u(/^ *(?:\*{3,}|-{3,}|_{3,}) *(?:\n+|$)/),x=function(n){var r=_(n);if(!r)return null;var e=r[0];return{token:{type:"hr"},newSource:n.substring(e.length)}},A=u(/^(?:<!--[\s\S]*?--> *(?:\n|\s*$)|<((?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\b)\w+(?!:\/|[^\w\s@]*@)\b)[\s\S]+?<\/\1> *(?:\n{2,}|\s*$)|<(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\b)\w+(?!:\/|[^\w\s@]*@)\b(?:"[^"]*"|'[^']*'|[^'">])*?> *(?:\n{2,}|\s*$))/),q=function(n){if("<"!==n[0])return null;var r=A(n);if(!r)return null;var e=r[0];return{token:{type:"html",value:e},newSource:n.substring(e.length)}},j=u(/^( *)((?:[*+-]|\d+\.)) [\s\S]+?(?:\n+(?=\1?(?:[-*_] *){3,}(?:\n+|$))|\n+(?= *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$))|\n{2,}(?! )(?!\1(?:[*+-]|\d+\.) )\n*|\s*$)/),O=l(/^( *)((?:[*+-]|\d+\.)) [^\n]*(?:\n(?!\1(?:[*+-]|\d+\.) )[^\n]*)*/gm),P=a(/^ *([*+-]|\d+\.) +/,""),I=a(/^ */gm,""),B=l(/^(\d)/),C=a(/\n(?=\d*\. )/,"\n\n"),E=function(n,r){var e=j(n);if(!e)return null;var u=e[0],i=e[2],l=t(r,C,I,P),o=O(u).map(function(n){var r=l(n);return 1===r.length&&"paragraph"===r[0].type&&(r=r[0].children),{type:"listitem",children:r}}),a=B(i);return{token:{type:"list",ordered:!!a,start:a&&+a[1],children:o},newSource:n.substring(u.length)}},M=u(/^\n+/),z=function(n){var r=M(n);if(!r)return null;var e=r[0];return{token:{type:"space"},newSource:n.substring(e.length)}},D=u(/^((?:[^\n]+\n?)+)\n*/),F=a(/\n$/," "),G=function(n,r,e){var t=D(n);if(!t)return null;var u=t[0],i=t[1];return{token:{type:"paragraph",children:e(F(i))},newSource:n.substring(u.length)}},H=a(/^ *| *\| *$/g,""),J=a(/^ *\| *| *\| *$/g,""),K=a(/^ *|\| *$/g,""),L=a(/\n$/," "),N=a(/(?: *\| *)?\n$/,""),Q=s("\n"),R=o(/^ *-+: *$/),T=o(/^ *:-+: *$/),U=function(n){for(var r=[],e=0,t=0;t<n.length;t+=1)"|"!==n[t]||"`"===n[t-1]||"\\"===n[t-1]?r[e]=(r[e]||"")+n[t]:e++;return i(c,r)},V=function(n,r){return t(i(n),U,H)(r)},W=t(U,J),X=function(n){return R(n)?"right":T(n)?"center":"left"},Y=t(i(X),s(/ *\| */),K),Z=function(n,r){return t(i(t(i(n),W)),Q,N)(r)},nn=function(n,r){return t(i(t(i(n),s(/ *\| */))),Q,L)(r)},rn=u(/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/),en=u(/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/),tn=function(n,r,e){var t=rn(n),u=!0;if(t||(t=en(n),u=!1),!t)return null;var i=t[0],l=t[1],o=t[2],a=t[3];return i?{token:{type:"table",header:V(e,l),align:Y(o),cells:u?nn(e,a):Z(e,a)},newSource:n.substring(i.length)}:null},un=u(/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/),ln=function(n){if("`"!==n[0])return null;var r=un(n);if(!r)return null;var e=r[0];return{token:{type:"code",value:r[2]},newSource:n.substring(e.length)}},on=u(/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/),an=function(n,r){if("_"!==n[0]&&"*"!==n[0])return null;var e=on(n);if(!e)return null;var t=e[0],u=e[1];return{token:{type:"em",children:r(e[2]||u)},newSource:n.substring(t.length)}},sn=u(/^\\([\\`*{}[\]()#+\-.!_>~|])/),cn=function(n){if("\\"!==n[0])return null;var r=sn(n);if(!r)return null;var e=r[0];return{token:{type:"text",value:e},newSource:n.substring(e.length)}},pn=u(/^(?:<(a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img))(?: *\S+=['"].*['"])*(?: *\/>|>.*?<\/\1>)/),fn=function(n){if("<"!==n[0])return null;var r=pn(n);if(!r)return null;var e=r[0];return{token:{type:"html",value:e},newSource:n.substring(e.length)}},gn=u(/^ *\n(?!\s*$)/),bn=function(n){var r=gn(n);if(!r)return null;var e=r[0];return{token:{type:"br"},newSource:n.substring(e.length)}},hn=u(/^<([^ >]+(@|:\/)[^ >]+)>/),vn=function(n){if("<"!==n[0])return null;var r=hn(n);if(!r)return null;var e=r[0],t=r[2],u=r[1],i="";return"@"===t?(u=":"===u.charAt(6)?u.substring(7):u,i="mailto:"+u):i=u,{token:{type:"link",href:i,children:[{type:"text",value:u}]},newSource:n.substring(e.length)}},dn=o(/^http/),yn=u(/^(https?:\/\/[^\s<]+[^<.,:;"')}\]\s])/),kn=function(n){if(!dn(n))return null;var r=yn(n);if(!r)return null;var e=r[0],t=r[1];return{token:{type:"link",href:t,children:[{type:"text",value:t}]},newSource:n.substring(e.length)}},Sn=u(/^!?\[(.*)\]\((?:([\S]*) *["'](.*)["']\)|(.*)(?: *\)))/),mn=function(n){for(var r=0,e="",t=0;t<n.length&&(")"!==n[t]||0!==r);t+=1)"("===n[t]&&r++,")"===n[t]&&r--,e+=n[t];return[e,n.substring(e.length)]},wn=function(n,r){if("["!==n[0]&&"!"!==n[0])return null;var e,t=Sn(n);if(!t)return null;var u=t[0],i=t[1],l=t[2],o=t[3];if(t[4]){var a=mn(t[4]);l=a[0],u=a[1].length?u.slice(0,-a[1].length):u}return e="!"===u[0]?{type:"image",src:l,alt:i}:{type:"link",href:l,children:r(i)},o&&(e.title=o),{token:e,newSource:n.substring(u.length)}},$n=function(n,r){return vn(n)||kn(n)||wn(n,r)},_n=u(/^~~(?=\S)([\s\S]*?\S)~~/),xn=function(n,r){if("~"!==n[0])return null;var e=_n(n);if(!e)return null;var t=e[0];return{token:{type:"strikethrough",children:r(e[1])},newSource:n.substring(t.length)}},An=u(/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/),qn=function(n,r){if("_"!==n[0]&&"*"!==n[0])return null;var e=An(n);if(!e)return null;var t=e[0],u=e[1];return{token:{type:"strong",children:r(e[2]||u)},newSource:n.substring(t.length)}},jn=u(/^[\s\S]+?(?=[\\<![_*`~]|https?:\/\/| *\n|$)/),On=function(n){var r=jn(n);if(!r)return null;var e=r[0];return{token:{type:"text",value:e},newSource:n.substring(e.length)}},Pn={html:!1},In=function(n){function r(n,r,e){o[n].push({parser:r,priority:e}),o[n]=o[n].sort(function(n,r){return r.priority-n.priority})}function t(n,r){for(var e,t=o[n].length,u="",i=0;i<t;i+=1){var l=o[n][i].parser,c="block"===n?l(r,a,s):l(r,s);if(c){u=c.newSource,e=c.token;break}}return e?{token:e,newSource:u}:null}function u(n){return function(r){for(var e=[];r.length>0;){var u=t(n,r)||{},i=u.token,l=void 0===i?null:i,o=u.newSource,a=void 0===o?"":o;if(r===a||!l)throw new Error("Infinite loop on byte: "+r.charCodeAt(0));e.push(l),r=a}return e}}function i(n){return e(n)}var l=Object.assign({},Pn,n),o={block:[{parser:z,priority:1e3},{parser:$,priority:900},{parser:x,priority:800},{parser:g,priority:700},{parser:k,priority:600},{parser:tn,priority:500},{parser:E,priority:400},{parser:G,priority:0}],inline:[{parser:cn,priority:1e3},{parser:ln,priority:900},{parser:qn,priority:800},{parser:an,priority:700},{parser:xn,priority:600},{parser:$n,priority:500},{parser:bn,priority:400},{parser:On,priority:0}]};l.html&&(r("block",q,200),r("inline",fn,200));var a=u("block"),s=u("inline"),c={parse:function(n){return a(i(n))},useInlineParser:function(n,e){return r("inline",n,e),c},useBlockParser:function(n,e){return r("block",n,e),c}};return c},Bn=function(n){return In().parse(n)};n.default=In,n.parse=Bn,Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map

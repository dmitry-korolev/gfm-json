!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(n.example=n.example||{})}(this,function(n){"use strict";var r=function(){var n=arguments[0],r=n.length,e=function(){var t=Array.prototype.slice.call(arguments);return t.length>=r?n.apply(null,t):e.bind.apply(e,[null].concat(t))};return e.bind.apply(e,[null].concat(Array.prototype.slice.call(arguments,1)))},e=r(function(n,r){return n.exec(r)}),t=r(function(n,r){return r.match(n)||[]}),u=r(function(n,r,e){return e.replace(n,r)}),i=r(function(n,r){return r.split(n)}),l=r(function(n,r){return n.test(r)}),o=function(n){return n.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n").replace(/^ +$/gm,"")},a=(r(function(n,r){return n===r}),function(){var n=Array.prototype.slice.call(arguments),r=n.length-1;return function(e){for(var t=e,u=r;u>=0;u-=1)t=n[u](t);return t}}),c=r(function(n,r){for(var e=new Array(r.length),t=0;t<r.length;t+=1)e[t]=n(r[t],t,r);return e}),s=(r(function(n,r){return 0===r.indexOf(n)}),e(/^( {4}[^\n]+\n*)+/)),p=u(/^ {4}/gm,""),f=e(/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/),g=function(n){if("`"!==n[0])return null;var r=s(n);if(!r)return null;var e=r[0];return{token:{type:"codeblock",language:"",value:p(e)},newSource:n.substring(e.length)}},h=function(n){var r=f(n);if(!r)return null;var e=r[0];return{token:{type:"codeblock",language:r[2],value:r[3]},newSource:n.substring(e.length)}},v=function(n){return g(n)||h(n)},y=e(/^\n+/),d=function(n){var r=y(n);if(!r)return null;var e=r[0];return{token:{type:"space"},newSource:n.substring(e.length)}},b=e(/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/),S=e(/^([^\n]+)\n *([=-]){2,} *(?:\n+|$)/),k=function(n){return"#"===n[0]?n.length:"="===n?1:2},w=function(n,r,e){var t="#"===n[0]&&b(n)||S(n);if(!t)return null;var u=t[0],i=t[1],l=t[2];return{token:{type:"heading",level:k(i),children:e(l)},newSource:n.substring(u.length)}},$=e(/^( *>[^\n]+(\n(?! *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$))[^\n]+)*\n*)+/),m=u(/^ *> ?/gm,""),_=function(n,r){if(">"!==n[0])return null;var e=$(n);if(!e)return null;var t=e[0],u=r(m(t));return 1===u.length&&"paragraph"===u[0].type&&(u=u[0].children),{token:{type:"blockquote",children:r(m(t))},newSource:n.substring(t.length)}},x=u(/^ *| *\| *$/g,""),A=u(/^ *\| *| *\| *$/g,""),P=u(/^ *|\| *$/g,""),j=u(/\n$/," "),I=u(/(?: *\| *)?\n$/,""),O=i("\n"),q=l(/^ *-+: *$/),B=l(/^ *:-+: *$/),C=function(n){return x(n).split(/ *\| */).map(function(n){return n.trim()})},E=a(i(/ *\| */),A),M=function(n){return q(n)?"right":B(n)?"center":"left"},z=function(n){return P(n).split(/ *\| */).map(M)},D=function(n,r){return a(c(a(c(n),E)),O,I)(r)},F=function(n,r){return a(c(a(c(n),i(/ *\| */))),O,j)(r)},G=e(/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/),H=e(/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/),J=function(n,r,e){var t=G(n),u=!0;if(t||(t=H(n),u=!1),!t)return null;var i=t[0],l=t[1],o=t[2],a=t[3];return i?{token:{type:"table",header:C(l),align:z(o),cells:u?F(e,a):D(e,a)},newSource:n.substring(i.length)}:null},K=e(/^ *(?:\*{3,}|-{3,}|_{3,}) *(?:\n+|$)/),L=function(n){var r=K(n);if(!r)return null;var e=r[0];return{token:{type:"hr"},newSource:n.substring(e.length)}},N=e(/^((?:[^\n]+\n?)+)\n*/),Q=u(/\n$/," "),R=function(n,r,e){var t=N(n);if(!t)return null;var u=t[0],i=t[1];return{token:{type:"paragraph",children:e(Q(i))},newSource:n.substring(u.length)}},T=e(/^( *)((?:[*+-]|\d+\.)) [\s\S]+?(?:\n+(?=\1?(?:[-*_] *){3,}(?:\n+|$))|\n+(?= *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$))|\n{2,}(?! )(?!\1(?:[*+-]|\d+\.) )\n*|\s*$)/),U=t(/^( *)((?:[*+-]|\d+\.)) [^\n]*(?:\n(?!\1(?:[*+-]|\d+\.) )[^\n]*)*/gm),V=u(/^ *([*+-]|\d+\.) +/,""),W=u(/^ */gm,""),X=t(/^(\d)/),Y=u(/\n(?=\d*\. )/,"\n\n"),Z=function(n,r){var e=T(n);if(!e)return null;var t=e[0],u=e[2],i=a(r,Y,W,V),l=U(t).map(function(n){var r=i(n);return 1===r.length&&"paragraph"===r[0].type&&(r=r[0].children),{type:"listitem",children:r}}),o=X(u);return{token:{type:"list",ordered:!!o,start:o&&+o[1],children:l},newSource:n.substring(t.length)}},nn=e(/^\\([\\`*{}[\]()#+\-.!_>~|])/),rn=function(n){if("\\"!==n[0])return null;var r=nn(n);if(!r)return null;var e=r[0];return{token:{type:"text",value:e},newSource:n.substring(e.length)}},en=e(/^<([^ >]+(@|:\/)[^ >]+)>/),tn=function(n){if("<"!==n[0])return null;var r=en(n);if(!r)return null;var e=r[0],t=r[2],u=r[1],i="";return"@"===t?(u=":"===u.charAt(6)?u.substring(7):u,i="mailto:"+u):i=u,{token:{type:"link",href:i,children:[{type:"text",value:u}]},newSource:n.substring(e.length)}},un=l(/^http/),ln=e(/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/),on=function(n){if(!un(n))return null;var r=ln(n);if(!r)return null;var e=r[0],t=r[1];return{token:{type:"link",href:t,children:[{type:"text",value:t}]},newSource:n.substring(e.length)}},an=e(/^!?\[((?:\[[^\]]*\]|[^[\]]|\](?=[^[]*\]))*)\]\(\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*\)/),cn=function(n,r){if("["!==n[0]&&"!"!==n[0])return null;var e,t=an(n);if(!t)return null;var u=t[0],i=t[1],l=t[2],o=t[3];return e="!"===i[0]?{type:"image",src:l,alt:i,title:o}:{type:"link",href:l,title:o,children:r(i)},{token:e,newSource:n.substring(u.length)}},sn=function(n,r){return tn(n)||on(n)||cn(n,r)},pn=e(/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/),fn=function(n,r){if("_"!==n[0]&&"*"!==n[0])return null;var e=pn(n);if(!e)return null;var t=e[0],u=e[1];return{token:{type:"strong",children:r(e[2]||u)},newSource:n.substring(t.length)}},gn=e(/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/),hn=function(n,r){if("_"!==n[0]&&"*"!==n[0])return null;var e=gn(n);if(!e)return null;var t=e[0],u=e[1];return{token:{type:"em",children:r(e[2]||u)},newSource:n.substring(t.length)}},vn=e(/^~~(?=\S)([\s\S]*?\S)~~/),yn=function(n,r){if("~"!==n[0])return null;var e=vn(n);if(!e)return null;var t=e[0];return{token:{type:"strikethrough",children:r(e[1])},newSource:n.substring(t.length)}},dn=e(/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/),bn=function(n){if("`"!==n[0])return null;var r=dn(n);if(!r)return null;var e=r[0];return{token:{type:"code",value:r[2]},newSource:n.substring(e.length)}},Sn=e(/^ *\n(?!\s*$)/),kn=function(n){var r=Sn(n);if(!r)return null;var e=r[0];return{token:{type:"br"},newSource:n.substring(e.length)}},wn=e(/^[\s\S]+?(?=[\\<![_*`~]|https?:\/\/| *\n|$)/),$n=function(n){var r=wn(n);if(!r)return null;var e=r[0];return{token:{type:"text",value:e},newSource:n.substring(e.length)}},mn=function(){function n(n,r,e){t[n].push({parser:r,priority:e}),t[n]=t[n].sort(function(n,r){return r.priority-n.priority})}function r(n,r){for(var e,l=t[n].length,o="",a=0;a<l;a+=1){var c=t[n][a].parser,s="block"===n?c(r,u,i):c(r,i);if(s){o=s.newSource,e=s.token;break}}return e?{token:e,newSource:o}:null}function e(n){return function(e){for(var t=[];e.length>0;){var u=r(n,e)||{},i=u.token,l=void 0===i?null:i,o=u.newSource,a=void 0===o?"":o;if(e===a||!l)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));t.push(l),e=a}return t}}var t={block:[{parser:d,priority:1e3},{parser:w,priority:900},{parser:L,priority:800},{parser:_,priority:700},{parser:v,priority:600},{parser:J,priority:500},{parser:Z,priority:400},{parser:R,priority:0}],inline:[{parser:rn,priority:1e3},{parser:bn,priority:900},{parser:fn,priority:800},{parser:hn,priority:700},{parser:yn,priority:600},{parser:sn,priority:500},{parser:kn,priority:400},{parser:$n,priority:0}]},u=e("block"),i=e("inline");return{parse:function(n){return u(o(n))},useInlineParser:function(r,e){return n("inline",r,e),this},useBlockParser:function(r,e){return n("block",r,e),this}}},_n=function(n){return mn().parse(n)};n.default=mn,n.parse=_n,Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map

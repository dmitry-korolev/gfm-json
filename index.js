!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(n.example=n.example||{})}(this,function(n){"use strict";var r=function(){var n=arguments[0],r=n.length,e=function(){var t=Array.prototype.slice.call(arguments);return t.length>=r?n.apply(null,t):e.bind.apply(e,[null].concat(t))};return e.bind.apply(e,[null].concat(Array.prototype.slice.call(arguments,1)))},e=r(function(n,r){return n.exec(r)}),t=r(function(n,r){return r.match(n)||[]}),u=r(function(n,r,e){return e.replace(n,r)}),i=r(function(n,r){return r.split(n)}),l=r(function(n,r){return n.test(r)}),o=function(n){return n.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n").replace(/^ +$/gm,"")},a=(r(function(n,r){return n===r}),function(){var n=Array.prototype.slice.call(arguments),r=n.length-1;return function(e){for(var t=e,u=r;u>=0;u-=1)t=n[u](t);return t}}),s=r(function(n,r){for(var e=new Array(r.length),t=0;t<r.length;t+=1)e[t]=n(r[t],t,r);return e}),c=(r(function(n,r){return 0===r.indexOf(n)}),e(/^( *>[^\n]+(\n(?! *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$))[^\n]+)*\n*)+/)),p=u(/^ *> ?/gm,""),f=function(n,r){if(">"!==n[0])return null;var e=c(n);if(!e)return null;var t=e[0],u=r(p(t));return 1===u.length&&"paragraph"===u[0].type&&(u=u[0].children),{token:{type:"blockquote",children:r(p(t))},newSource:n.substring(t.length)}},g=e(/^( {4}[^\n]+\n*)+/),h=u(/^ {4}/gm,""),v=e(/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/),y=function(n){if("`"!==n[0])return null;var r=g(n);if(!r)return null;var e=r[0];return{token:{type:"codeblock",language:"",value:h(e)},newSource:n.substring(e.length)}},b=function(n){var r=v(n);if(!r)return null;var e=r[0];return{token:{type:"codeblock",language:r[2],value:r[3]},newSource:n.substring(e.length)}},d=function(n){return y(n)||b(n)},k=e(/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/),S=e(/^([^\n]+)\n *([=-]){2,} *(?:\n+|$)/),w=function(n){return"#"===n[0]?n.length:"="===n?1:2},m=function(n,r,e){var t="#"===n[0]&&k(n)||S(n);if(!t)return null;var u=t[0],i=t[1],l=t[2];return{token:{type:"heading",level:w(i),children:e(l)},newSource:n.substring(u.length)}},$=e(/^ *(?:\*{3,}|-{3,}|_{3,}) *(?:\n+|$)/),_=function(n){var r=$(n);if(!r)return null;var e=r[0];return{token:{type:"hr"},newSource:n.substring(e.length)}},x=e(/^(?:<!--[\s\S]*?--> *(?:\n|\s*$)|<((?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\b)\w+(?!:\/|[^\w\s@]*@)\b)[\s\S]+?<\/\1> *(?:\n{2,}|\s*$)|<(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\b)\w+(?!:\/|[^\w\s@]*@)\b(?:"[^"]*"|'[^']*'|[^'">])*?> *(?:\n{2,}|\s*$))/),A=function(n){if("<"!==n[0])return null;var r=x(n);if(!r)return null;var e=r[0];return{token:{type:"html",value:e},newSource:n.substring(e.length)}},q=e(/^( *)((?:[*+-]|\d+\.)) [\s\S]+?(?:\n+(?=\1?(?:[-*_] *){3,}(?:\n+|$))|\n+(?= *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$))|\n{2,}(?! )(?!\1(?:[*+-]|\d+\.) )\n*|\s*$)/),P=t(/^( *)((?:[*+-]|\d+\.)) [^\n]*(?:\n(?!\1(?:[*+-]|\d+\.) )[^\n]*)*/gm),j=u(/^ *([*+-]|\d+\.) +/,""),I=u(/^ */gm,""),O=t(/^(\d)/),B=u(/\n(?=\d*\. )/,"\n\n"),C=function(n,r){var e=q(n);if(!e)return null;var t=e[0],u=e[2],i=a(r,B,I,j),l=P(t).map(function(n){var r=i(n);return 1===r.length&&"paragraph"===r[0].type&&(r=r[0].children),{type:"listitem",children:r}}),o=O(u);return{token:{type:"list",ordered:!!o,start:o&&+o[1],children:l},newSource:n.substring(t.length)}},E=e(/^\n+/),M=function(n){var r=E(n);if(!r)return null;var e=r[0];return{token:{type:"space"},newSource:n.substring(e.length)}},z=e(/^((?:[^\n]+\n?)+)\n*/),D=u(/\n$/," "),F=function(n,r,e){var t=z(n);if(!t)return null;var u=t[0],i=t[1];return{token:{type:"paragraph",children:e(D(i))},newSource:n.substring(u.length)}},G=u(/^ *| *\| *$/g,""),H=u(/^ *\| *| *\| *$/g,""),J=u(/^ *|\| *$/g,""),K=u(/\n$/," "),L=u(/(?: *\| *)?\n$/,""),N=i("\n"),Q=l(/^ *-+: *$/),R=l(/^ *:-+: *$/),T=function(n){return G(n).split(/ *\| */).map(function(n){return n.trim()})},U=a(i(/ *\| */),H),V=function(n){return Q(n)?"right":R(n)?"center":"left"},W=function(n){return J(n).split(/ *\| */).map(V)},X=function(n,r){return a(s(a(s(n),U)),N,L)(r)},Y=function(n,r){return a(s(a(s(n),i(/ *\| */))),N,K)(r)},Z=e(/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/),nn=e(/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/),rn=function(n,r,e){var t=Z(n),u=!0;if(t||(t=nn(n),u=!1),!t)return null;var i=t[0],l=t[1],o=t[2],a=t[3];return i?{token:{type:"table",header:T(l),align:W(o),cells:u?Y(e,a):X(e,a)},newSource:n.substring(i.length)}:null},en=e(/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/),tn=function(n){if("`"!==n[0])return null;var r=en(n);if(!r)return null;var e=r[0];return{token:{type:"code",value:r[2]},newSource:n.substring(e.length)}},un=e(/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/),ln=function(n,r){if("_"!==n[0]&&"*"!==n[0])return null;var e=un(n);if(!e)return null;var t=e[0],u=e[1];return{token:{type:"em",children:r(e[2]||u)},newSource:n.substring(t.length)}},on=e(/^\\([\\`*{}[\]()#+\-.!_>~|])/),an=function(n){if("\\"!==n[0])return null;var r=on(n);if(!r)return null;var e=r[0];return{token:{type:"text",value:e},newSource:n.substring(e.length)}},sn=e(/^ *\n(?!\s*$)/),cn=function(n){var r=sn(n);if(!r)return null;var e=r[0];return{token:{type:"br"},newSource:n.substring(e.length)}},pn=e(/^<([^ >]+(@|:\/)[^ >]+)>/),fn=function(n){if("<"!==n[0])return null;var r=pn(n);if(!r)return null;var e=r[0],t=r[2],u=r[1],i="";return"@"===t?(u=":"===u.charAt(6)?u.substring(7):u,i="mailto:"+u):i=u,{token:{type:"link",href:i,children:[{type:"text",value:u}]},newSource:n.substring(e.length)}},gn=l(/^http/),hn=e(/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/),vn=function(n){if(!gn(n))return null;var r=hn(n);if(!r)return null;var e=r[0],t=r[1];return{token:{type:"link",href:t,children:[{type:"text",value:t}]},newSource:n.substring(e.length)}},yn=e(/^!?\[((?:\[[^\]]*\]|[^[\]]|\](?=[^[]*\]))*)\]\(\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*\)/),bn=function(n,r){if("["!==n[0]&&"!"!==n[0])return null;var e,t=yn(n);if(!t)return null;var u=t[0],i=t[1],l=t[2],o=t[3];return e="!"===i[0]?{type:"image",src:l,alt:i,title:o}:{type:"link",href:l,title:o,children:r(i)},{token:e,newSource:n.substring(u.length)}},dn=function(n,r){return fn(n)||vn(n)||bn(n,r)},kn=e(/^~~(?=\S)([\s\S]*?\S)~~/),Sn=function(n,r){if("~"!==n[0])return null;var e=kn(n);if(!e)return null;var t=e[0];return{token:{type:"strikethrough",children:r(e[1])},newSource:n.substring(t.length)}},wn=e(/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/),mn=function(n,r){if("_"!==n[0]&&"*"!==n[0])return null;var e=wn(n);if(!e)return null;var t=e[0],u=e[1];return{token:{type:"strong",children:r(e[2]||u)},newSource:n.substring(t.length)}},$n=e(/^[\s\S]+?(?=[\\<![_*`~]|https?:\/\/| *\n|$)/),_n=function(n){var r=$n(n);if(!r)return null;var e=r[0];return{token:{type:"text",value:e},newSource:n.substring(e.length)}},xn=function(){function n(n,r,e){u[n].push({parser:r,priority:e}),u[n]=u[n].sort(function(n,r){return r.priority-n.priority})}function r(n,r){for(var e,t=u[n].length,o="",a=0;a<t;a+=1){var s=u[n][a].parser,c="block"===n?s(r,i,l):s(r,l);if(c){o=c.newSource,e=c.token;break}}return e?{token:e,newSource:o}:null}function e(n){return function(e){for(var t=[];e.length>0;){var u=r(n,e)||{},i=u.token,l=void 0===i?null:i,o=u.newSource,a=void 0===o?"":o;if(e===a||!l)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));t.push(l),e=a}return t}}function t(n){return o(n)}var u={block:[{parser:M,priority:1e3},{parser:m,priority:900},{parser:_,priority:800},{parser:f,priority:700},{parser:d,priority:600},{parser:rn,priority:500},{parser:C,priority:400},{parser:A,priority:300},{parser:F,priority:0}],inline:[{parser:an,priority:1e3},{parser:tn,priority:900},{parser:mn,priority:800},{parser:ln,priority:700},{parser:Sn,priority:600},{parser:dn,priority:500},{parser:cn,priority:400},{parser:_n,priority:0}]},i=e("block"),l=e("inline");return{parse:function(n){return i(t(n))},useInlineParser:function(r,e){return n("inline",r,e),this},useBlockParser:function(r,e){return n("block",r,e),this}}},An=function(n){return xn().parse(n)};n.default=xn,n.parse=An,Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
